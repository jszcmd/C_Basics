#define _CRT_SECURE_NO_WARNINGS

// (一).字符指针
// (二).指针数组
// (三).数组指针
// (四).数组参数和指针参数
// (五).函数指针
// (六).函数指针数组
// (七).指向函数指针数组的指针
// (八).回调函数
// (九).指针和数组面试题目的解析

// (四).数组参数和指针参数
// ##########################################################

#include <stdio.h>

// ---------------------------------------------------------
// (1):一维数组传参
// ---------------------------------------------------------

#include <stdio.h>

void test1(int arr[10])
{
    printf("test1 : hello world!!!\n");
}

// 一维数组传参可以不写数组大小 - 因为数组传参会退化为指针
void test2(int arr[])
{
    printf("test2 : hello world!!!\n");
}

// 数组传参,形参部分写成指针的形式 - 这是最常用的方式
// 数组名作为参数传递时，实际上传递的是数组首元素的地址
void test3(int *arr)
{
    printf("test3 : hello world!!!\n");
}

// 指针数组的传参 - 数组元素都是int*类型
void test4(int *arr[20])
{
    printf("test4 : hello world!!!\n");
}

// 指针数组传参可以不写大小
void test5(int *arr[])
{
    printf("test5 : hello world!!!\n");
}

// 指针数组传参可以用二级指针接收
// 因为arr2是指针数组，数组名表示首元素地址，首元素是int*，所以地址类型是int**
void test6(int **arr)
{
    printf("test6 : hello world!!!\n");
}

int main1()
{
    int arr[10] = {0};   // 普通整型数组
    int *arr2[20] = {0}; // 指针数组：arr2有20个元素,每一个元素是int*类型

    // arr2表示首元素的地址,首元素是int*,所以arr2的类型是int**;
    test1(arr);  // 传递普通数组
    test4(arr2); // 传递指针数组
    return 0;
}

// ---------------------------------------------------------
// (2):二维数组传参
// ---------------------------------------------------------

#include <stdio.h>

// (a):写成完整数组形式 - 明确指定行和列
void test7(int arr[3][5])
{
    printf("hello world!!!\n");
}

// (a):写成数组形式,行可以省略,列不能够省略
// 因为二维数组在内存中是按行连续存储的，必须知道列数才能正确计算元素位置
void test8(int arr[][5])
{
    printf("形参的二维数组,行可以省略,列不能够省略!!!\n");
}

// (b):写成数组指针形式 - 这是推荐的写法
// int (*p)[5] 表示p是一个指针，指向包含5个整数的数组
void test9(int (*p)[5])
{
    printf("数组指针当作形参;\n");
}

int main2()
{
    int arr[3][5] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15};
    // 二维数组的数组名,表示首元素的地址,其实就是第一行的地址;
    // 第一行是一个一维数组，所以arr的类型是int(*)[5]
    test7(arr);
    test8(arr);
    test9(arr);
    return 0;
}

// ---------------------------------------------------------
// (3):一级指针传参
// ---------------------------------------------------------

// 问题：如果函数的参数是一级指针,调用函数的时候可以传递什么实参呢？

// 可以传递的实参包括：
// 1. 普通变量的地址：&a
// 2. 一级指针变量：ptr
// 3. 一维数组名：arr (数组名表示首元素地址，类型为int*)
// 4. 动态分配的内存地址：malloc返回的指针

#include <stdio.h>
void print(int *p, int len)
{
    int i = 0;
    for (i = 0; i < len; i++)
    {
        printf("%d ", *(p + i));
    }
    printf("\n");
}

int main3()
{
    int a = 10;
    print(&a, 1); // 传递普通变量的地址

    int *p1 = &a;
    print(p1, 1); // 传递一级指针变量

    int arr[] = {1, 2, 3, 4, 5, 6, 7, 89, 2, 410, 575};
    int *p = arr;
    int len = sizeof(arr) / sizeof(arr[0]);

    print(arr, len); // 传递数组名
    print(p, len);   // 传递指向数组的指针
    return 0;
}

// ---------------------------------------------------------
// (4):二级指针传参
// ---------------------------------------------------------

// 问题：如果函数的形式参数是二级指针,调用函数的时候可以传递什么实参呢？

// 可以传递的实参包括：
// 1. 一级指针的地址:&p
// 2. 二级指针变量:p2
// 3. 指针数组名:arr3 (指针数组的数组名表示首元素地址,首元素是int*,所以类型是int**)
// 4. 三级指针解引用:*p3

#include <stdio.h>

void test(int **p)
{
    printf("%d\n", **p);
}

int main()
{
    int n = 10;
    int *p = &n;     // 一级指针
    int **p2 = &p;   // 二级指针
    int ***p3 = &p2; // 三级指针

    test(&p); // 取出一级指针的地址
    test(p2); // 直接传二级指针p2本身

    int *arr3[10] = {&n}; // 指针数组:数组元素都是int*类型
    test(arr3);           // 传递指针数组名

    // 三级指针解引用得到二级指针
    test(*p3);

    return 0;
}
